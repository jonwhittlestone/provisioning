---
- hosts: doylestone02
  vars_files:
    # Contains ansible_become_pass
    - inventory/group_vars/vault.yml

  become: yes
  pre_tasks:
    - debug:
        msg: "ðŸ‘· Welcome! Provisioning {{ansible_nodename}} at {{ansible_default_ipv4['address']}} "

    - name: Update apt cache if needed.
      apt: update_cache=yes cache_valid_time=3600

  tasks:
    - name: Get software for apt repository management.
      apt:
        state: present
        name:
          - python3-apt
          - python3-pycurl

    - name: Install basic utilities
      apt:
        state: present
        # state: absent
        name:
          - git
          - curl
          - software-properties-common
          - neovim
          - virtualbox
          - vagrant

    # - name: Install VScode-insiders # see: Geerling's breakdown of installing a package from web https://youtu.be/SLW4LX7lbvE?t=1610
